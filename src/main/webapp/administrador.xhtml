<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:jsf="http://xmlns.jcp.org/jsf"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:shiro="http://shiro.apache.org/tags"
    xmlns:p="http://primefaces.org/ui">


<h:head>

    <meta charset="utf-8"></meta>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"></meta>

    <title>ECIBank</title>
    <meta content="" name="descriptison"></meta>
    <meta content="" name="keywords"></meta>

    <!-- Favicons -->
    <link href="assets/img/tabicon.svg" rel="icon"></link>
    <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon"></link>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet"></link>

    <!-- Vendor CSS Files -->
    <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet"></link>
    <link href="assets/vendor/icofont/icofont.min.css" rel="stylesheet"></link>
    <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet"></link>
    <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet"></link>
    <link href="assets/vendor/owl.carousel/assets/owl.carousel.min.css" rel="stylesheet"></link>
    <link href="assets/vendor/venobox/venobox.css" rel="stylesheet"></link>
    <link href="assets/vendor/aos/aos.css" rel="stylesheet"></link>

    <!-- Template Main CSS File -->
    <link href="assets/css/style.css" rel="stylesheet"></link>

    <!-- Datatables CSS CDN -->
    <link rel="stylesheet" href="https://cdn.datatables.net/s/ju/dt-1.10.10,b-1.1.0,fc-3.2.0,r-2.0.0,sc-1.4.0/datatables.min.css" />



</h:head>
<h:body >
    <header id="header" class="fixed-top d-flex align-items-center">
        <div class="container d-flex align-items-center">

            <div class="logo mr-auto">
                <h1 class="text-light"><a href="index.xhtml"><span><span style="color:#3498db;">ECI</span>Bank</span></a></h1>
                <!-- Uncomment below if you prefer to use an image logo -->
                <!-- <a href="index.html"><img src="assets/img/logo.png" alt="" class="img-fluid"></a>-->
            </div>

            <nav class="nav-menu d-none d-lg-block">
                <ul>
                    <li class="active"><a href="#header">Home</a></li>
                    <!--
                    <li><a href="iniciativas.xhtml">Iniciativas</a></li>

                    <li><a href="#portfolio">Portfolio</a></li>
                    <li><a href="#team">Team</a></li>
                    <li><a href="#pricing">Pricing</a></li>
                    -->
                    <li class="drop-down"><a href="">Opciones</a>
                        <ul>
                            <li><a href="#">Ver Iniciativas</a></li>
                        </ul>
                    </li>


                    <li class="get-started">
                        <form method="POST" jsf:id="formulario" novalidate="">
                            <a type="submit" jsf:actionListener="#{loginBean.logout()}">Cerrar Sesi√≥n</a>
                        </form>
                    </li>
                </ul>
            </nav><!-- .nav-menu -->

        </div>
    </header><!-- End Header -->
    <!-- ======= Breadcrumbs ======= -->
    <section id="breadcrumbs" class="breadcrumbs">
        <div class="container">

            <div class="d-flex justify-content-between align-items-center">
                <h2>Usuarios</h2>
                <ol>
                    <li><a href="index.xhtml">Home</a></li>
                    <li>Usuarios</li>
                </ol>
            </div>

        </div>
    </section><!-- End Breadcrumbs -->
<tbody>
    
    <p></p>
<div  class="table-responsive" style="margin-top:0px; font-size: 20px ; text-align:center ">
                    
    <h:form id="form" class="" >
        <p:growl id="msgs" showDetail="true"   />
            <p:dataTable style=" background-color: #EAECEE ; width: 90% ; margin: auto"  id="singleDT" var="usuario" value="#{usuarioBean.usuarios}" selectionMode="single" selection="#{usuarioBean.usuario}" rowKey="#{usuario.correo}" widgetVar="usersTable1" emptyMessage="No se encontraron coincidencias" >
                <f:facet name="header">
                    TABLA DE USUARIOS
                </f:facet>

                <p:column width="20%" headerText="Correo" style="text-align:center">
                    <h:outputText value="#{usuario.correo}"  />
                </p:column>
                <p:column filterBy="#{usuario.nombre}" headerText="Nombre"  filterMatchMode="contains" style="text-align:center">
                    <h:outputText value="#{usuario.nombre}" />
                </p:column>

                <p:column filterBy="#{usuario.rol}" headerText="Rol" filterMatchMode="contains" style="text-align:center">
                    <f:facet name="filter">
                        <p:selectOneButton onchange="PF('usersTable1').filter()" styleClass="custom-filter">
                            <f:selectItem itemLabel="TODOS" itemValue="" />
                            <f:selectItem itemLabel="ADMINISTRADOR" itemValue="ADMINISTRADOR" />
                            <f:selectItem itemLabel="PERSONAL_PMO" itemValue="PERSONAL_PMO" />
                            <f:selectItem itemLabel="PROPONENTE" itemValue="PROPONENTE" />
                            <f:selectItem itemLabel="PUBLICO" itemValue="PUBLICO" />
                        </p:selectOneButton>
                    </f:facet>
                    <h:outputText value="#{usuario.rol}" />
                </p:column>

                <p:column filterBy="#{usuario.estado}" headerText="Estado" filterMatchMode="contains" style="text-align:center">
                    <f:facet name="filter">
                        <p:selectOneButton onchange="PF('usersTable1').filter()" styleClass="custom-filter">
                            <f:selectItem itemLabel="TODOS" itemValue="" />
                            <f:selectItem itemLabel="ACTIVO" itemValue="ACTIVO" />
                            <f:selectItem itemLabel="INACTIVO" itemValue="INACTIVO" />
                        </p:selectOneButton>
                    </f:facet>
                    <h:outputText value="#{usuario.estado}" />
                </p:column>
                <f:facet name="footer">
                    <p:commandButton id = "saveBtn1" process="singleDT" update=":form:usuarioDetail" value="Visualizar" oncomplete="PF('usuarioDialog').show()" />
                        <p:blockUI block="form" trigger="saveBtn1">
                            <p:graphicImage name="assets/img/ajax-loader.gif"/>
                        </p:blockUI>
                </f:facet>
            </p:dataTable>
                <p:dialog header="Edicion de Usuario" widgetVar="usuarioDialog" modal="true" showEffect="fade" hideEffect="fade" resizable="false">
                <p:outputPanel id="usuarioDetail" style="margin-top:0px; font-size: 20px ; text-align:center ">
                    <p:panelGrid  columns="2" rendered="#{not empty usuarioBean.usuario}">

                        <h:outputText value="Correo:" />
                        <h:outputText value="#{usuarioBean.usuario.correo}" />

                        <h:outputText value="Nombre:" />
                        <h:outputText value="#{usuarioBean.usuario.nombre}" />

                        <h:outputText value="Rol Actual:" />
                        <h:outputText value="#{usuarioBean.usuario.rol}" />

                        <h:outputText value="Rol Nuevo:" />
                        <p:selectOneMenu id="rol" value="#{usuarioBean.rol}" style="{width:200px position: absolute}" >
                            <f:selectItem itemLabel="Seleccione uno" itemValue="" />
                            <f:selectItem itemLabel="PROPONENTE" itemValue="PROPONENTE"/>
                            <f:selectItem itemLabel="PUBLICO" itemValue="PUBLICO" />
                            <f:selectItem itemLabel="PERSONAL_PMO" itemValue="PERSONAL_PMO" />
                            <f:selectItem itemLabel="ADMINISTRADOR" itemValue="ADMINISTRADOR" />

                        </p:selectOneMenu>

                        <h:outputText value="Estado" />
                        <h:outputText value="#{usuarioBean.usuario.estado}" />


                    </p:panelGrid>
                    <p></p>
                    <p:commandButton value ="Guardar" actionListener="#{usuarioBean.modificarUsuario(usuarioBean.usuario.correo, usuarioBean.rol)}" id="iconOnly" update="form" style="margin-right:20px;" styleClass="ui-priority-primary" action="#{usuarioBean.mensaje(usuarioBean.usuario.correo)}"/>
                     <p:blockUI block="usuarioDetail" trigger="iconOnly">
                            <p:graphicImage name="assets/img/ajax-loader.gif"/>
                     </p:blockUI>
                </p:outputPanel>
            </p:dialog>
    </h:form>
</div>
            </tbody>


 



    <!-- Vendor JS Files -->
    <!--<script src="assets/vendor/jquery/jquery.min.js"></script>-->
    <script>
    </script>
    


    <script src="assets/vendor/jquery.easing/jquery.easing.min.js"></script>
    <script src="assets/vendor/php-email-form/validate.js"></script>
    <script src="assets/vendor/waypoints/jquery.waypoints.min.js"></script>
    <script src="assets/vendor/counterup/counterup.min.js"></script>
    <script src="assets/vendor/owl.carousel/owl.carousel.min.js"></script>
    <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
    <script src="assets/vendor/venobox/venobox.min.js"></script>
    <script src="assets/vendor/aos/aos.js"></script>
    

    <!-- Template Main JS File -->
    <script src="assets/js/main.js"></script>

    <!-- Datatables JS CDN -->
    <script src='https://cdn.datatables.net/s/ju/dt-1.10.10,b-1.1.0,fc-3.2.0,fh-3.1.0,r-2.0.0,sc-1.4.0/datatables.min.js'></script>
</h:body>

</html>
